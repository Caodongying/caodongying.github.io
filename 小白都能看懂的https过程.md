当你浏览网页的时候，你或许会留意到大部分网页的地址都以https开头。而当你访问那些以http（没有s）作为前缀的网站的时候，诸如Chrome这样的浏览器会提示你这是“不安全的连接”。你也许会感到好奇：

为什么连接会有安全和不安全之分呢？什么是https？为什么以https://开头的网站要比以http://开头的网站安全呢？浏览那些http网站存在哪些安全隐患？我该如何将我的网站由http“升级”为https呢？

HTTPS协议的全称是HyperText Transfer Protocol Secure，超文本传输协议安全。HTTPS协议是传输层HTTP协议的安全版本，因为其在HTTP协议的基础上添加了TLS/SSL加密层。与https相关的概念和话题有很多，你也许听过以下这些词：对称加密，非对称加密，CA(Certificate Authority)，证书验证，申请证书，公钥私钥......本文将由浅入深、抽丝剥茧地为你讲解https协议。

# 场景描述
假设你作为client（用户），想要访问一个网站，并且需要发送一些你不想被别人知道的数据，比如你的出生日期、银行卡账号等。为了表述方便，我们假设要访问的网站叫做www.caodongying.com。如果www.caodongying.com采用的是http协议，那么你在浏览网页、在某一刻提交自己信息的时候，数据是以明文的方式被传输的。也就是说如果黑客劫持了你和www.caodongying.com之间的连接，那么他就可以直接看到你所发送的消息，也可以看到www.caodongying.com返回给你的数据。

这会带来什么问题呢？有三点：
1. 信息泄露（窃听风险）。你向www.caodongying.com提交了自己的生日和银行卡账号，但是黑客劫持了连接并且知道了这些信息。
2. 数据篡改（篡改风险）。你访问www.caodongying.com时是想纯粹地阅读一些博客，但是黑客劫持了www.caodongying.com返回给你的博客界面，并且修改了脚本，在里面插入了广告。如此一来，你的阅读体验就大大下降。
3. 身份冒充。黑客可以冒充www.caodongying.com，你希望阅读一篇关于https的技术博客，但是黑客在冒充了这个网站后，返回给你一些其他消极的内容。

而如果www.caodongying.com采用https协议来传输数据，你的信息就会经过加密然后被传输。假设你原本的数据是”我的银行卡账号是12431"，加密后的结果就是"hjw#7428"，即使黑客劫持了你的连接也只能看到一串意义不明的加密码，无法知道真正的内容是什么。至于https是如何防止网站服务器返回的内容被篡改、防止网站本身被冒充的，我们将在下文继续介绍。

# 需求分析
现在我们知道了使用http协议进行数据传输会带来的问题，那么我们就可以知道作为解决方案的https协议身负的重任。我们从软件需求的角度来罗列一下https协议应该实现哪些需求：

